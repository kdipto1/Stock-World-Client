import{u as y,a as j,j as a,$ as b,V as r}from"./index-oGEXg8xX.js";import{a as m}from"./index-C0Bg54wM.js";import"./vendor-Du-depLi.js";const q=()=>{let o=y();const c=localStorage.getItem("email"),l=localStorage.getItem("accessToken"),{data:e,isLoading:h,refetch:u}=j({queryKey:["manageProduct"],queryFn:()=>fetch(`https://stock-world-server.onrender.com/inventory/${o.id}`,{headers:{Authorization:`${c} ${l}`}}).then(i=>i.json())});if(h)return a.jsx("div",{className:"flex justify-center my-10",children:a.jsx(b,{width:"200",color:"#4fa94d"})});const x=i=>{if(i.preventDefault(),e.quantity<=0){r.loading("Product not available. Please Restock!",{duration:80});return}let n=parseInt(e.quantity)-1;const d=`https://stock-world-server.onrender.com/inventory/${o.id}`;try{m.put(d,{quantity:n},{headers:{Authorization:`${c} ${l}`}}).then(t=>{const{data:s}=t;s&&(r.success("Product Delivered",{position:"top-right",duration:80}),u())})}catch(t){console.log(t),r.error(t==null?void 0:t.message)}},f=i=>{i.preventDefault();const n=i.target;n.quantity.value||r("Please put the quantity",{duration:80});let d=parseInt(e==null?void 0:e.quantity)+parseInt(n.quantity.value);const t=`https://stock-world-server.onrender.com/inventory/${o.id}`;if(parseInt(n.quantity.value)<=0){r.error("Enter a positive number");return}if(parseInt(n.quantity.value)>=0)try{m.put(t,{quantity:d},{headers:{Authorization:`${c} ${l}`}}).then(s=>{const{data:p}=s;p&&(r.success("Stock updated"),u(),n.reset())})}catch(s){r.error(s==null?void 0:s.message),console.log(s)}};return a.jsxs("section",{className:"container mx-auto mt-10",children:[a.jsxs("div",{"data-aos":"fade-right","data-aos-offset":"300","data-aos-easing":"ease-in-sine","data-aos-once":"true",className:"card lg:card-side bg-base-100 shadow-xl",children:[a.jsx("figure",{children:a.jsx("img",{src:e==null?void 0:e.image,alt:"Album"})}),a.jsxs("div",{className:"card-body my-auto",children:[a.jsx("p",{className:"card-title",children:e==null?void 0:e.name}),a.jsxs("p",{className:"",children:[a.jsx("span",{className:"font-bold",children:"Product Id:"})," ",e==null?void 0:e._id]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-bold",children:"Description:"})," ",e==null?void 0:e.description]}),a.jsxs("p",{className:"",children:[a.jsx("span",{className:"font-bold",children:"Product Price:"})," ",e==null?void 0:e.price,"$"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-bold",children:"Product Quantity:"})," ",a.jsx("span",{className:"",children:e==null?void 0:e.quantity})]}),a.jsx("div",{className:"card-actions justify-end",children:a.jsx("button",{onClick:x,className:"btn",children:"Deliver"})})]})]}),a.jsx("div",{"data-aos":"fade-left","data-aos-anchor":"#example-anchor","data-aos-offset":"500","data-aos-duration":"500","data-aos-once":"true",className:"mt-20 card bg-base-100 shadow-xl mx-auto",children:a.jsxs("div",{className:"card-body items-center text-center",children:[a.jsxs("h2",{className:"card-title",children:["Update Stock Quantity for ",e==null?void 0:e.name]}),a.jsxs("form",{onSubmit:f,children:[a.jsx("input",{className:"input input-bordered input-primary w-full max-w-xs",type:"number",placeholder:"update stock",name:"quantity"}),a.jsx("br",{}),a.jsx("input",{className:"btn mt-4",type:"submit",value:"Update Stock"})]})]})})]})};export{q as default};
//# sourceMappingURL=ManageProduct-BklemCsk.js.map
