{"version":3,"file":"ManageProduct-BklemCsk.js","sources":["../../src/Pages/ManageProduct/ManageProduct.tsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\nimport { InfinitySpin } from \"react-loader-spinner\";\r\n\r\nconst ManageProduct = () => {\r\n  let params = useParams();\r\n  const email = localStorage.getItem(\"email\");\r\n  const accessToken = localStorage.getItem(\"accessToken\");\r\n  const {\r\n    data: product,\r\n    isLoading,\r\n    refetch,\r\n  } = useQuery({\r\n    queryKey: [\"manageProduct\"],\r\n    queryFn: () =>\r\n      fetch(`https://stock-world-server.onrender.com/inventory/${params.id}`, {\r\n        headers: {\r\n          Authorization: `${email} ${accessToken}`,\r\n        },\r\n      }).then((res) => res.json()),\r\n  });\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center my-10\">\r\n        <InfinitySpin width=\"200\" color=\"#4fa94d\" />\r\n      </div>\r\n    );\r\n  }\r\n  /* Delivery Product function */\r\n  const handleDelivery = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    event.preventDefault();\r\n    if (product.quantity <= 0) {\r\n      toast.loading(\"Product not available. Please Restock!\", {\r\n        duration: 80,\r\n      });\r\n      return;\r\n    }\r\n    let quantity = parseInt(product.quantity) - 1;\r\n    const url = `https://stock-world-server.onrender.com/inventory/${params.id}`;\r\n    try {\r\n      axios\r\n        .put(\r\n          url,\r\n          { quantity: quantity },\r\n          {\r\n            headers: {\r\n              Authorization: `${email} ${accessToken}`,\r\n            },\r\n          }\r\n        )\r\n        .then((response) => {\r\n          const { data } = response;\r\n          if (data) {\r\n            toast.success(\"Product Delivered\", {\r\n              position: \"top-right\",\r\n              duration: 80,\r\n            });\r\n            refetch();\r\n          }\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error((error as any)?.message);\r\n    }\r\n  };\r\n  const handleRestock = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const target = event.target as HTMLFormElement;\r\n    if (!(target.quantity as HTMLInputElement).value) {\r\n      toast(\"Please put the quantity\", {\r\n        duration: 80,\r\n      });\r\n    }\r\n    let quantity =\r\n      parseInt(product?.quantity) + parseInt((target.quantity as HTMLInputElement).value);\r\n    const url = `https://stock-world-server.onrender.com/inventory/${params.id}`;\r\n    if (parseInt((target.quantity as HTMLInputElement).value) <= 0) {\r\n      toast.error(\"Enter a positive number\");\r\n      return;\r\n    }\r\n    if (parseInt((target.quantity as HTMLInputElement).value) >= 0) {\r\n      try {\r\n        axios\r\n          .put(\r\n            url,\r\n            { quantity: quantity },\r\n            {\r\n              headers: {\r\n                Authorization: `${email} ${accessToken}`,\r\n              },\r\n            }\r\n          )\r\n          .then((response) => {\r\n            const { data } = response;\r\n            if (data) {\r\n              toast.success(\"Stock updated\");\r\n              refetch();\r\n              target.reset();\r\n            }\r\n          });\r\n      } catch (error) {\r\n        toast.error((error as any)?.message);\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <section className=\"container mx-auto mt-10\">\r\n      <div\r\n        data-aos=\"fade-right\"\r\n        data-aos-offset=\"300\"\r\n        data-aos-easing=\"ease-in-sine\"\r\n        data-aos-once=\"true\"\r\n        className=\"card lg:card-side bg-base-100 shadow-xl\"\r\n      >\r\n        <figure>\r\n          <img src={product?.image} alt=\"Album\" />\r\n        </figure>\r\n        <div className=\"card-body my-auto\">\r\n          <p className=\"card-title\">{product?.name}</p>\r\n          <p className=\"\">\r\n            <span className=\"font-bold\">Product Id:</span> {product?._id}\r\n          </p>\r\n          <p>\r\n            <span className=\"font-bold\">Description:</span>{\" \"}\r\n            {product?.description}\r\n          </p>\r\n          <p className=\"\">\r\n            <span className=\"font-bold\">Product Price:</span> {product?.price}$\r\n          </p>\r\n          <p>\r\n            <span className=\"font-bold\">Product Quantity:</span>{\" \"}\r\n            <span className=\"\">{product?.quantity}</span>\r\n          </p>\r\n          <div className=\"card-actions justify-end\">\r\n            <button onClick={handleDelivery} className=\"btn\">\r\n              Deliver\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* +++++++++++ */}\r\n      <div\r\n        data-aos=\"fade-left\"\r\n        data-aos-anchor=\"#example-anchor\"\r\n        data-aos-offset=\"500\"\r\n        data-aos-duration=\"500\"\r\n        data-aos-once=\"true\"\r\n        className=\"mt-20 card bg-base-100 shadow-xl mx-auto\"\r\n      >\r\n        <div className=\"card-body items-center text-center\">\r\n          <h2 className=\"card-title\">\r\n            Update Stock Quantity for {product?.name}\r\n          </h2>\r\n          <form onSubmit={handleRestock}>\r\n            <input\r\n              className=\"input input-bordered input-primary w-full max-w-xs\"\r\n              type=\"number\"\r\n              placeholder=\"update stock\"\r\n              name=\"quantity\"\r\n            />\r\n            <br />\r\n            <input className=\"btn mt-4\" type=\"submit\" value=\"Update Stock\" />\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ManageProduct;\r\n"],"names":["ManageProduct","params","useParams","email","accessToken","product","isLoading","refetch","useQuery","res","jsx","InfinitySpin","handleDelivery","event","toast","quantity","url","axios","response","data","error","handleRestock","target","jsxs"],"mappings":"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"}