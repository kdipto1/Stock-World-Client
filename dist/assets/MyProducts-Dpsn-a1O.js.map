{"version":3,"file":"MyProducts-Dpsn-a1O.js","sources":["../../src/Pages/MyProducts/MyProducts.tsx"],"sourcesContent":["// @ts-nocheck\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport toast from \"react-hot-toast\";\r\nimport { InfinitySpin } from \"react-loader-spinner\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport auth from \"../../firebase.init\";\r\n\r\nconst MyProducts = () => {\r\n  const navigate = useNavigate();\r\n  const accessToken = localStorage.getItem(\"accessToken\");\r\n  const email = localStorage.getItem(\"email\");\r\n  const {\r\n    data: myItems,\r\n    isLoading,\r\n    refetch,\r\n  } = useQuery({\r\n    queryKey: [\"myItems\"],\r\n    queryFn: async () =>\r\n      await fetch(\r\n        `https://stock-world-server.onrender.com/inventoryUser?email=${email}`,\r\n        {\r\n          headers: {\r\n            Authorization: `${email} ${accessToken}`,\r\n          },\r\n        }\r\n      ).then((res) => res.json()),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center my-10\">\r\n        <InfinitySpin width=\"200\" color=\"#4fa94d\" />\r\n      </div>\r\n    );\r\n  }\r\n  if (myItems?.status === 403) {\r\n    toast(myItems?.message);\r\n    signOut(auth);\r\n    navigate(\"/login\");\r\n  }\r\n\r\n  /* ++++++++++++++++++++++++++++++++ */\r\n  // const [user, loading, error] = useAuthState(auth);\r\n  // const [myItems, setMyItems] = useState([]);\r\n  // const [newItems, setNewItems] = useState([]);\r\n  // const navigate = useNavigate();\r\n  // useEffect(() => {\r\n  //   if (loading) {\r\n  //     return;\r\n  //   }\r\n  //   const getMyItems = async () => {\r\n  //     const email = user?.email;\r\n  //     const url = `https://stock-world-server.onrender.com/inventoryUser?email=${email}`;\r\n  //     try {\r\n  //       const { data } = await axios.get(url, {\r\n  //         headers: {\r\n  //           Authorization: `${user?.email} ${localStorage.getItem(\r\n  //             \"accessToken\"\r\n  //           )}`,\r\n  //         },\r\n  //       });\r\n  //       console.log(data);\r\n  //       setMyItems(data);\r\n  //     } catch (error) {\r\n  //       console.log(error);\r\n  //       if (error?.response.status === 403) {\r\n  //         toast(error?.response.data.message);\r\n  //         signOut(auth);\r\n  //         navigate(\"/login\");\r\n  //       }\r\n  //     }\r\n  //   };\r\n  //   if (loading) {\r\n  //     return (\r\n  //       <div className=\"flex justify-center my-10\">\r\n  //         <InfinitySpin width=\"200\" color=\"#4fa94d\" />\r\n  //       </div>\r\n  //     );\r\n  //   }\r\n  //   getMyItems();\r\n  // }, [user, newItems, navigate, loading, myItems]);\r\n  // if (!myItems) {\r\n  //   return (\r\n  //     <div className=\"flex justify-center my-10\">\r\n  //       <InfinitySpin width=\"200\" color=\"#4fa94d\" />\r\n  //     </div>\r\n  //   );\r\n  // }\r\n\r\n  const deleteItem = async (id) => {\r\n    const verify = window.confirm(\"Delete\");\r\n    if (!verify) {\r\n      return;\r\n    } else {\r\n      const url = `https://stock-world-server.onrender.com/inventory/${id}`;\r\n      try {\r\n        await axios\r\n          .delete(\r\n            url,\r\n            {\r\n              headers: {\r\n                Authorization: `${email} ${accessToken}`,\r\n              },\r\n            },\r\n            { id }\r\n          )\r\n          .then((response) => {\r\n            const { data } = response;\r\n            if (data) {\r\n              toast.success(\"Item Deleted\");\r\n              refetch();\r\n            }\r\n          });\r\n      } catch (error) {\r\n        toast.error(error.message);\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <section className=\"mt-6 container mx-auto\">\r\n      <h2 className=\"font-bold text-2xl text-center\">Manage inventory</h2>\r\n      <div className=\"text-center\">\r\n        <Link to=\"/addProduct\" className=\"btn my-4\">\r\n          Add New Product\r\n        </Link>\r\n      </div>\r\n      {/* ++++++++++++++ */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"table w-full\">\r\n          <thead>\r\n            <tr>\r\n              <th>Product Id</th>\r\n              <th>Product Name</th>\r\n              <th>Quantity</th>\r\n              <th>Supplier</th>\r\n              <th>Image</th>\r\n              <th>Manage Product</th>\r\n            </tr>\r\n          </thead>\r\n          {myItems?.map((item) => (\r\n            <tbody key={item?._id}>\r\n              <tr className=\"hover\">\r\n                <td>{item?._id}</td>\r\n                <td>\r\n                  <div className=\"tooltip\" data-tip={item?.name}>\r\n                    {item?.name.slice(0, 30)}...\r\n                  </div>\r\n                </td>\r\n                <td>{item?.quantity}</td>\r\n                <td>{item?.supplier}</td>\r\n                <td>\r\n                  <img\r\n                    className=\"w-24\"\r\n                    src={item?.image}\r\n                    alt=\"Inventory product images\"\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <Link\r\n                    to={`/manageProduct/${item?._id}`}\r\n                    className=\"btn btn-xs btn-primary\"\r\n                  >\r\n                    Manage\r\n                  </Link>{\" \"}\r\n                  <button\r\n                    className=\"btn btn-xs btn-warning\"\r\n                    onClick={() => deleteItem(item?._id)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          ))}\r\n        </table>\r\n      </div>\r\n      {/* ++++++++++++++ */}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default MyProducts;\r\n"],"names":["MyProducts","navigate","useNavigate","accessToken","email","myItems","isLoading","refetch","useQuery","res","jsx","InfinitySpin","toast","signOut","auth","deleteItem","id","url","axios","response","data","error","jsxs","Link","item"],"mappings":"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"}