{"version":3,"file":"AddProduct-BpbtoIjf.js","sources":["../../src/Pages/AddProduct/AddProduct.tsx"],"sourcesContent":["import axios from \"axios\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport toast from \"react-hot-toast\";\nimport auth from \"../../firebase.init\";\n\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\n\nconst AddProduct = () => {\n  const [user, loading] = useAuthState(auth);\n  const queryClient = useQueryClient();\n\n  const mutation = useMutation({\n    mutationFn: (newProduct: any) => {\n      const userEmail = localStorage.getItem(\"email\");\n      const accessToken = localStorage.getItem(\"accessToken\");\n      const url = `https://stock-world-server.onrender.com/inventory/`;\n      return axios.post(url, newProduct, {\n        headers: {\n          Authorization: `${userEmail} ${accessToken}`,\n        },\n      });\n    },\n    onSuccess: () => {\n      toast.success(\"Product Successfully Added!\");\n      queryClient.invalidateQueries({ queryKey: [\"manageItems\"] });\n    },\n    onError: (error: any) => {\n      toast.error(\n        error.response?.data?.message ||\n          error.message ||\n          \"Failed to add product\"\n      );\n    },\n  });\n\n  const addNewProduct = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const form = event.currentTarget;\n    const newProduct = {\n      email: user?.email,\n      name: form.productName.value,\n      supplier: form.supplier.value,\n      price: form.price.value,\n      quantity: form.quantity.value,\n      description: form.description.value,\n      image: form.image.value,\n    };\n    mutation.mutate(newProduct);\n    form.reset();\n  };\n\n  if (loading) {\n    return <LoadingSpinner message=\"Loading...\" />;\n  }\n\n  return (\n    <section className=\"min-h-screen bg-base-200 py-12\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-4xl font-bold\">Add New Product</h1>\n            <p className=\"opacity-70\">\n              Add a new product to your inventory\n            </p>\n          </div>\n\n          <div className=\"card bg-base-100 shadow-lg\">\n            <div className=\"card-body\">\n              <form onSubmit={addNewProduct} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <input\n                    name=\"productName\"\n                    type=\"text\"\n                    placeholder=\"Product Name\"\n                    className=\"input input-bordered w-full\"\n                    required\n                  />\n                  <input\n                    name=\"supplier\"\n                    type=\"text\"\n                    placeholder=\"Supplier\"\n                    className=\"input input-bordered w-full\"\n                    required\n                  />\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <input\n                    name=\"price\"\n                    type=\"number\"\n                    placeholder=\"Price\"\n                    className=\"input input-bordered w-full\"\n                    required\n                  />\n                  <input\n                    name=\"quantity\"\n                    type=\"number\"\n                    placeholder=\"Quantity\"\n                    className=\"input input-bordered w-full\"\n                    required\n                  />\n                </div>\n                <textarea\n                  name=\"description\"\n                  className=\"textarea textarea-bordered w-full\"\n                  placeholder=\"Description\"\n                  required\n                ></textarea>\n                <input\n                  name=\"image\"\n                  type=\"text\"\n                  placeholder=\"Image URL\"\n                  className=\"input input-bordered w-full\"\n                  required\n                />\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary w-full\"\n                  disabled={mutation.isPending}\n                >\n                  {mutation.isPending ? \"Adding...\" : \"Add Product\"}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default AddProduct;"],"names":["AddProduct","user","loading","useAuthState","auth","queryClient","useQueryClient","mutation","useMutation","newProduct","userEmail","accessToken","axios","toast","error","_b","_a","addNewProduct","event","form","jsx","LoadingSpinner","jsxs"],"mappings":"8LAQA,MAAMA,EAAa,IAAM,CACvB,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAaC,CAAI,EACnCC,EAAcC,EAAA,EAEdC,EAAWC,EAAY,CAC3B,WAAaC,GAAoB,CAC/B,MAAMC,EAAY,aAAa,QAAQ,OAAO,EACxCC,EAAc,aAAa,QAAQ,aAAa,EAEtD,OAAOC,EAAM,KADD,qDACWH,EAAY,CACjC,QAAS,CACP,cAAe,GAAGC,CAAS,IAAIC,CAAW,EAAA,CAC5C,CACD,CACH,EACA,UAAW,IAAM,CACfE,EAAM,QAAQ,6BAA6B,EAC3CR,EAAY,kBAAkB,CAAE,SAAU,CAAC,aAAa,EAAG,CAC7D,EACA,QAAUS,GAAe,SACvBD,EAAM,QACJE,GAAAC,EAAAF,EAAM,WAAN,YAAAE,EAAgB,OAAhB,YAAAD,EAAsB,UACpBD,EAAM,SACN,uBAAA,CAEN,CAAA,CACD,EAEKG,EAAiBC,GAA4C,CACjEA,EAAM,eAAA,EACN,MAAMC,EAAOD,EAAM,cACbT,EAAa,CACjB,MAAOR,GAAA,YAAAA,EAAM,MACb,KAAMkB,EAAK,YAAY,MACvB,SAAUA,EAAK,SAAS,MACxB,MAAOA,EAAK,MAAM,MAClB,SAAUA,EAAK,SAAS,MACxB,YAAaA,EAAK,YAAY,MAC9B,MAAOA,EAAK,MAAM,KAAA,EAEpBZ,EAAS,OAAOE,CAAU,EAC1BU,EAAK,MAAA,CACP,EAEA,OAAIjB,EACKkB,EAAAA,IAACC,EAAA,CAAe,QAAQ,YAAA,CAAa,EAI5CD,EAAAA,IAAC,UAAA,CAAQ,UAAU,iCACjB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACb,SAAAE,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,kBAAe,EAClDA,EAAAA,IAAC,IAAA,CAAE,UAAU,aAAa,SAAA,qCAAA,CAE1B,CAAA,EACF,EAEAA,MAAC,MAAA,CAAI,UAAU,6BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAE,EAAAA,KAAC,OAAA,CAAK,SAAUL,EAAe,UAAU,YACvC,SAAA,CAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACC,KAAK,cACL,KAAK,OACL,YAAY,eACZ,UAAU,8BACV,SAAQ,EAAA,CAAA,EAEVA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,KAAK,OACL,YAAY,WACZ,UAAU,8BACV,SAAQ,EAAA,CAAA,CACV,EACF,EACAE,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,KAAK,SACL,YAAY,QACZ,UAAU,8BACV,SAAQ,EAAA,CAAA,EAEVA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,KAAK,SACL,YAAY,WACZ,UAAU,8BACV,SAAQ,EAAA,CAAA,CACV,EACF,EACAA,EAAAA,IAAC,WAAA,CACC,KAAK,cACL,UAAU,oCACV,YAAY,cACZ,SAAQ,EAAA,CAAA,EAEVA,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,KAAK,OACL,YAAY,YACZ,UAAU,8BACV,SAAQ,EAAA,CAAA,EAEVA,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,yBACV,SAAUb,EAAS,UAElB,SAAAA,EAAS,UAAY,YAAc,aAAA,CAAA,CACtC,CAAA,CACF,EACF,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,CAEJ"}