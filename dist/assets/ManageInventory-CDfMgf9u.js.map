{"version":3,"file":"ManageInventory-CDfMgf9u.js","sources":["../../src/Pages/ManageInventory/ManageInventory.tsx"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\nimport { useState } from \"react\";\nimport { IInventoryItem } from \"../../types\";\n\nconst ManageInventory = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const queryClient = useQueryClient();\n  const accessToken = localStorage.getItem(\"accessToken\");\n  const email = localStorage.getItem(\"email\");\n\n  const { data: inventoryItems, isLoading } = useQuery<IInventoryItem[]>({\n    queryKey: [\"manageItems\"],\n    queryFn: async () => {\n      const res = await fetch(\n        \"https://stock-world-server.onrender.com/manageInventory\",\n        {\n          headers: {\n            Authorization: `${email} ${accessToken}`,\n          },\n        }\n      );\n      if (!res.ok) {\n        throw new Error(\"Failed to fetch inventory\");\n      }\n      return res.json();\n    },\n    enabled: !!email && !!accessToken,\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (id: string) =>\n      axios.delete(`https://stock-world-server.onrender.com/inventory/${id}`),\n    onSuccess: () => {\n      toast.success(\"Item deleted successfully!\");\n      queryClient.invalidateQueries({ queryKey: [\"manageItems\"] });\n    },\n    onError: (error: any) => {\n      toast.error(\n        error.response?.data?.message ||\n          error.message ||\n          \"Failed to delete item\"\n      );\n    },\n  });\n\n  const handleDelete = (id: string) => {\n    if (window.confirm(\"Are you sure you want to delete this item?\")) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const filteredItems = inventoryItems?.filter(\n    (item) =>\n      item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (item.supplier || \"N/A\").toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (isLoading) {\n    return <LoadingSpinner message=\"Loading inventory...\" />;\n  }\n\n  return (\n    <section className=\"min-h-screen bg-base-200 py-12\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex flex-col md:flex-row justify-between items-center mb-8 gap-4\">\n          <div>\n            <h1 className=\"text-4xl font-bold\">Manage Inventory</h1>\n            <p className=\"opacity-70\">\n              Track and manage your product inventory\n            </p>\n          </div>\n          <div className=\"flex gap-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Search products...\"\n              className=\"input input-bordered w-full max-w-xs\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <Link to=\"/addProduct\" className=\"btn btn-primary\">\n              Add Product\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"card bg-base-100 shadow-lg\">\n          <div className=\"card-body\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"table w-full\">\n                <thead>\n                  <tr>\n                    <th>Product</th>\n                    <th>Quantity</th>\n                    <th>Supplier</th>\n                    <th>Price</th>\n                    <th className=\"text-center\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredItems?.map((product) => (\n                    <tr key={product._id} className=\"hover\">\n                      <td>\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"avatar\">\n                            <div className=\"mask mask-squircle w-12 h-12\">\n                              <img\n                                src={product.image}\n                                alt={product.name}\n                              />\n                            </div>\n                          </div>\n                          <div>\n                            <div className=\"font-bold\">{product.name}</div>\n                            <div className=\"text-sm opacity-50\">\n                              {product.supplier}\n                            </div>\n                          </div>\n                        </div>\n                      </td>\n                      <td>{product.quantity}</td>\n                      <td>{product.supplier}</td>\n                      <td>${product.price}</td>\n                      <th className=\"text-center\">\n                        <Link\n                          to={`/manageProduct/${product._id}`}\n                          className=\"btn btn-ghost btn-xs\"\n                        >\n                          details\n                        </Link>\n                        <button\n                          className=\"btn btn-ghost btn-xs\"\n                          onClick={() => handleDelete(product._id)}\n                          disabled={deleteMutation.isPending}\n                        >\n                          delete\n                        </button>\n                      </th>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default ManageInventory;"],"names":["ManageInventory","searchTerm","setSearchTerm","useState","queryClient","useQueryClient","accessToken","email","inventoryItems","isLoading","useQuery","res","deleteMutation","useMutation","id","axios","toast","error","_b","_a","handleDelete","filteredItems","item","jsx","LoadingSpinner","jsxs","e","Link","product"],"mappings":"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"}