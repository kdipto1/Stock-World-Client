import{u as y,a as j,b as g,j as e,L as b,V as i}from"./index-CH7ozQmp.js";import{u as f}from"./useMutation-cqouCRVi.js";import{a as v}from"./index-C0Bg54wM.js";import{r as N}from"./vendor-CM02gYGk.js";const Q=()=>{const{id:n}=y(),m=j(),c=localStorage.getItem("email"),o=localStorage.getItem("accessToken"),[l,d]=N.useState(""),{data:t,isLoading:x}=g({queryKey:["manageProduct",n],queryFn:()=>fetch(`https://stock-world-server.onrender.com/inventory/${n}`,{headers:{Authorization:`${c} ${o}`}}).then(s=>s.json()),enabled:!!n&&!!c&&!!o}),r=f({mutationFn:s=>{const a=`https://stock-world-server.onrender.com/inventory/${n}`;return v.put(a,{quantity:s},{headers:{Authorization:`${c} ${o}`}})},onSuccess:()=>{i.success("Product quantity updated successfully!"),m.invalidateQueries({queryKey:["manageProduct",n]})},onError:s=>{var a,u;i.error(((u=(a=s.response)==null?void 0:a.data)==null?void 0:u.message)||"Failed to update product quantity")}}),h=()=>{t&&t.quantity>0?r.mutate(t.quantity-1):i.error("Product is out of stock.")},p=s=>{s.preventDefault();const a=parseInt(l,10);t&&a>0?(r.mutate(t.quantity+a),d("")):i.error("Please enter a valid quantity.")};return x?e.jsx(b,{message:"Loading product details..."}):t?e.jsx("section",{className:"min-h-screen bg-base-200 py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"card lg:card-side bg-base-100 shadow-lg",children:[e.jsx("figure",{className:"lg:w-1/2",children:e.jsx("img",{src:t.image,alt:t.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"card-body lg:w-1/2",children:[e.jsx("h2",{className:"card-title text-3xl",children:t.name}),e.jsxs("p",{className:"text-sm opacity-50",children:["ID: ",t._id]}),e.jsx("p",{children:t.description}),e.jsxs("div",{className:"flex justify-between items-center my-4",children:[e.jsxs("p",{className:"text-xl font-bold",children:["Price: $",t.price]}),e.jsxs("p",{className:"text-xl font-bold",children:["Quantity: ",t.quantity]})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{onClick:h,className:"btn btn-primary",disabled:r.isPending,children:"Deliver"})})]})]}),e.jsx("div",{className:"card bg-base-100 shadow-lg mt-8",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Restock Item"}),e.jsxs("form",{onSubmit:p,className:"flex gap-4",children:[e.jsx("input",{type:"number",value:l,onChange:s=>d(s.target.value),placeholder:"Enter quantity",className:"input input-bordered w-full"}),e.jsx("button",{type:"submit",className:"btn btn-secondary",disabled:r.isPending,children:"Restock"})]})]})})]})})}):e.jsx("div",{children:"Product not found"})};export{Q as default};
//# sourceMappingURL=ManageProduct-DDPCuRFg.js.map
