import{m as v,o as S,d as k,e as o,f as L,p as P,V as l,j as e,L as E,c as R}from"./index-CH7ozQmp.js";import{r as g}from"./vendor-CM02gYGk.js";import{S as I}from"./SocialLogin-Di1A_uVZ.js";import{a as A}from"./index-C0Bg54wM.js";const T="/assets/login1-BmmZ1TVr.svg",D=()=>{var u,p;const[x,t,f,i]=v(o),[h,j]=S(o),[r,w]=k(o),c=g.useRef(null),m=L(),d=((p=(u=P().state)==null?void 0:u.from)==null?void 0:p.pathname)||"/";g.useEffect(()=>{var s;if(t||r){l.success("Login Successful");const a=((s=t==null?void 0:t.user)==null?void 0:s.email)||(r==null?void 0:r.email);A.post("https://stock-world-server.onrender.com/login",{email:a}).then(n=>{const{data:y}=n;localStorage.setItem("accessToken",y.token),localStorage.setItem("email",a),m(d,{replace:!0})}).catch(n=>{l.error(n.message)})}i&&l.error(i.message)},[i,d,m,t,r]);const N=s=>{s.preventDefault();const a=s.currentTarget.email.value,n=s.currentTarget.password.value;x(a,n)},b=async()=>{var a;const s=(a=c.current)==null?void 0:a.value;s?(await h(s),l.success("Sent password reset email")):l.error("Please enter your email address")};return f||w||j?e.jsx(E,{}):e.jsx("section",{className:"min-h-screen bg-base-200 flex items-center justify-center p-4",children:e.jsxs("div",{className:"card lg:card-side bg-base-100 shadow-xl max-w-4xl w-full",children:[e.jsx("figure",{className:"lg:w-1/2 hidden lg:flex",children:e.jsx("img",{className:"object-cover w-full h-full",src:T,alt:"Login illustration"})}),e.jsxs("div",{className:"card-body lg:w-1/2 justify-center",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Welcome Back!"}),e.jsx("p",{className:"opacity-70",children:"Please sign in to your account"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx("input",{name:"email",type:"email",ref:c,placeholder:"Email",required:!0,className:"input input-bordered w-full"}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",required:!0,className:"input input-bordered w-full"}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Sign In"})]}),e.jsxs("div",{className:"text-center mt-4 space-y-2 text-sm",children:[e.jsxs("p",{children:["Don't have an account?"," ",e.jsx(R,{className:"link link-primary",to:"/register",children:"Create Account"})]}),e.jsxs("p",{children:["Forgot your password?"," ",e.jsx("button",{className:"link link-primary",onClick:b,children:"Reset Password"})]})]}),e.jsx("div",{className:"divider",children:"OR"}),e.jsx(I,{})]})]})})};export{D as default};
//# sourceMappingURL=Login-HFzChalv.js.map
