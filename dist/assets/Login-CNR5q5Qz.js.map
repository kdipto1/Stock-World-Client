{"version":3,"file":"Login-CNR5q5Qz.js","sources":["../../src/Images/Login/login1.svg","../../src/Pages/Login/Login.tsx"],"sourcesContent":["export default \"__VITE_ASSET__DPHphLDK__\"","// @ts-nocheck\r\n/* eslint-disable react/no-unescaped-entities */\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport SocialLogin from \"./SocialLogin\";\r\nimport login1 from \"../../Images/Login/login1.svg\";\r\nimport toast from \"react-hot-toast\";\r\nimport { sendEmailVerification } from \"firebase/auth\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport {\r\n  useAuthState,\r\n  // useSendEmailVerification,\r\n  useSendPasswordResetEmail,\r\n  useSignInWithEmailAndPassword,\r\n} from \"react-firebase-hooks/auth\";\r\nimport auth from \"../../firebase.init\";\r\nimport axios from \"axios\";\r\n\r\nconst Login = () => {\r\n  const [signInWithEmailAndPassword, user, loading, error] =\r\n    useSignInWithEmailAndPassword(auth);\r\n  const [sendPasswordResetEmail, sending, resetError] =\r\n    useSendPasswordResetEmail(auth);\r\n  // const [sendEmailVerification, verifySending, verifyError] =\r\n  //   useSendEmailVerification(auth);\r\n  const [user1, loading1] = useAuthState(auth);\r\n  const emailRef = useRef(\"\");\r\n  let navigate = useNavigate();\r\n  let location = useLocation();\r\n  let from = location.state?.from?.pathname || \"/\";\r\n  useEffect(() => {\r\n    if (loading || loading1) {\r\n      return;\r\n    }\r\n    if (user || user1) {\r\n      toast.success(\"Login Successful\");\r\n      // console.log(user1);\r\n      const url = \"https://stock-world-server.onrender.com/login\";\r\n      axios\r\n        .post(url, { email: user1?.email })\r\n        .then((response) => {\r\n          const { data } = response;\r\n          localStorage.setItem(\"accessToken\", data.token);\r\n          localStorage.setItem(\"email\", user1?.email);\r\n          // console.log(data);\r\n          navigate(from, { replace: true });\r\n        })\r\n        .catch(function (error) {\r\n          toast.error(error.message);\r\n          console.log(error);\r\n        });\r\n    }\r\n    if (error || resetError) {\r\n      return toast.error(error.message);\r\n    }\r\n  }, [error, from, loading, navigate, user, user1, resetError, loading1]);\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault();\r\n    const email = event?.target?.email?.value;\r\n    const password = event?.target?.password?.value;\r\n    signInWithEmailAndPassword(email, password);\r\n    event.target.reset();\r\n  };\r\n  const resetPassword = async () => {\r\n    const email = emailRef.current.value;\r\n    if (email) {\r\n      await sendPasswordResetEmail(email);\r\n      toast(\"Sent email\");\r\n    } else {\r\n      toast(\"please enter your email address\");\r\n    }\r\n  };\r\n  return (\r\n    <section className=\"h-screen container mx-auto mt-20\">\r\n      <div className=\"card lg:card-side bg-base-100 shadow-xl mx-auto\">\r\n        <figure>\r\n          <img className=\"\" src={login1} alt=\"Album\" />\r\n        </figure>\r\n        <div className=\"card-body my-auto text-center\">\r\n          <h2 className=\"card-title text-2xl font-bold mx-auto\">\r\n            Please Login\r\n          </h2>\r\n          {/* +++++++ */}\r\n          <form onSubmit={handleLogin}>\r\n            <input\r\n              name=\"email\"\r\n              type=\"email\"\r\n              ref={emailRef}\r\n              placeholder=\"Your Email\"\r\n              required\r\n              className=\"input input-bordered input-primary w-full max-w-xs\"\r\n            />\r\n            <br />\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Your Password\"\r\n              required\r\n              className=\"input input-bordered input-primary w-full max-w-xs my-4\"\r\n            />\r\n            <br />\r\n            <input\r\n              type=\"submit\"\r\n              value=\"Login\"\r\n              className=\"btn hover:btn-primary btn-wide mt-2\"\r\n            />\r\n          </form>\r\n          <h1>\r\n            Don't have an account, Please{\" \"}\r\n            <Link className=\"text-primary\" to=\"/register\">\r\n              Register\r\n            </Link>{\" \"}\r\n          </h1>\r\n          <h1 className=\"\">\r\n            Forget password?{\" \"}\r\n            <span className=\"text-primary\" onClick={resetPassword}>\r\n              Reset Password\r\n            </span>\r\n          </h1>\r\n          {/* +++++++ */}\r\n          <div className=\"divider\">OR</div>\r\n          <SocialLogin />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["login1","Login","signInWithEmailAndPassword","user","loading","error","useSignInWithEmailAndPassword","auth","sendPasswordResetEmail","sending","resetError","useSendPasswordResetEmail","user1","loading1","useAuthState","emailRef","useRef","navigate","useNavigate","from","_b","_a","useLocation","useEffect","toast","axios","response","data","handleLogin","event","email","password","_d","_c","resetPassword","jsxs","jsx","Link","SocialLogin"],"mappings":"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"}