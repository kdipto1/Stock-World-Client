import{a as g,b as y,j as e,L as p,c as d,V as m}from"./index-CH7ozQmp.js";import{u as v}from"./useMutation-cqouCRVi.js";import{a as b}from"./index-C0Bg54wM.js";import{r as f}from"./vendor-CM02gYGk.js";const C=()=>{const[a,h]=f.useState(""),x=g(),r=localStorage.getItem("accessToken"),i=localStorage.getItem("email"),{data:t,isLoading:u}=y({queryKey:["manageItems"],queryFn:async()=>{const s=await fetch("https://stock-world-server.onrender.com/manageInventory",{headers:{Authorization:`${i} ${r}`}});if(!s.ok)throw new Error("Failed to fetch inventory");return s.json()},enabled:!!i&&!!r}),l=v({mutationFn:s=>b.delete(`https://stock-world-server.onrender.com/inventory/${s}`),onSuccess:()=>{m.success("Item deleted successfully!"),x.invalidateQueries({queryKey:["manageItems"]})},onError:s=>{var c,o;m.error(((o=(c=s.response)==null?void 0:c.data)==null?void 0:o.message)||s.message||"Failed to delete item")}}),j=s=>{window.confirm("Are you sure you want to delete this item?")&&l.mutate(s)},n=t==null?void 0:t.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||(s.supplier||"N/A").toLowerCase().includes(a.toLowerCase()));return u?e.jsx(p,{message:"Loading inventory..."}):e.jsx("section",{className:"min-h-screen bg-base-200 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Manage Inventory"}),e.jsx("p",{className:"opacity-70",children:"Track and manage your product inventory"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search products...",className:"input input-bordered w-full max-w-xs",value:a,onChange:s=>h(s.target.value)}),e.jsx(d,{to:"/addProduct",className:"btn btn-primary",children:"Add Product"})]})]}),e.jsx("div",{className:"card bg-base-100 shadow-lg",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Price"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map(s=>e.jsxs("tr",{className:"hover",children:[e.jsx("td",{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:s.image,alt:s.name})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:s.name}),e.jsx("div",{className:"text-sm opacity-50",children:s.supplier})]})]})}),e.jsx("td",{children:s.quantity}),e.jsx("td",{children:s.supplier}),e.jsxs("td",{children:["$",s.price]}),e.jsxs("th",{className:"text-center",children:[e.jsx(d,{to:`/manageProduct/${s._id}`,className:"btn btn-ghost btn-xs",children:"details"}),e.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>j(s._id),disabled:l.isPending,children:"delete"})]})]},s._id))})]})})})})]})})};export{C as default};
//# sourceMappingURL=ManageInventory-CDfMgf9u.js.map
