import{d as j,a as g,j as a,$ as f,V as c,s as p,L as d,c as y}from"./index-m1II4a16.js";import{a as v}from"./index-C0Bg54wM.js";import"./vendor-CiyiiN1J.js";const P=()=>{const o=j(),t=localStorage.getItem("accessToken"),n=localStorage.getItem("email"),{data:e,isLoading:l,refetch:h}=g({queryKey:["myItems"],queryFn:async()=>await fetch(`https://stock-world-server.onrender.com/inventoryUser?email=${n}`,{headers:{Authorization:`${n} ${t}`}}).then(s=>s.json())});if(l)return a.jsx("div",{className:"flex justify-center my-10",children:a.jsx(f,{width:"200",color:"#4fa94d"})});(e==null?void 0:e.status)===403&&(c(e==null?void 0:e.message),p(y),o("/login"));const x=async s=>{if(window.confirm("Delete")){const i=`https://stock-world-server.onrender.com/inventory/${s}`;try{await v.delete(i,{headers:{Authorization:`${n} ${t}`}},{id:s}).then(r=>{const{data:u}=r;u&&(c.success("Item Deleted"),h())})}catch(r){c.error(r.message),console.log(r)}}else return};return a.jsxs("section",{className:"mt-6 container mx-auto",children:[a.jsx("h2",{className:"font-bold text-2xl text-center",children:"Manage inventory"}),a.jsx("div",{className:"text-center",children:a.jsx(d,{to:"/addProduct",className:"btn my-4",children:"Add New Product"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"table w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Product Id"}),a.jsx("th",{children:"Product Name"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Supplier"}),a.jsx("th",{children:"Image"}),a.jsx("th",{children:"Manage Product"})]})}),e==null?void 0:e.map(s=>a.jsx("tbody",{children:a.jsxs("tr",{className:"hover",children:[a.jsx("td",{children:s==null?void 0:s._id}),a.jsx("td",{children:a.jsxs("div",{className:"tooltip","data-tip":s==null?void 0:s.name,children:[s==null?void 0:s.name.slice(0,30),"..."]})}),a.jsx("td",{children:s==null?void 0:s.quantity}),a.jsx("td",{children:s==null?void 0:s.supplier}),a.jsx("td",{children:a.jsx("img",{className:"w-24",src:s==null?void 0:s.image,alt:"Inventory product images"})}),a.jsxs("td",{children:[a.jsx(d,{to:`/manageProduct/${s==null?void 0:s._id}`,className:"btn btn-xs btn-primary",children:"Manage"})," ",a.jsx("button",{className:"btn btn-xs btn-warning",onClick:()=>x(s==null?void 0:s._id),children:"Delete"})]})]})},s==null?void 0:s._id))]})})]})};export{P as default};
//# sourceMappingURL=MyProducts-Dd0r5pNx.js.map
