{"version":3,"file":"Login-HFzChalv.js","sources":["../../src/Images/Login/login1.svg","../../src/Pages/Login/Login.tsx"],"sourcesContent":["export default \"__VITE_ASSET__DPHphLDK__\"","import React, { useEffect, useRef } from \"react\";\nimport SocialLogin from \"./SocialLogin\";\nimport login1 from \"../../Images/Login/login1.svg\";\nimport toast from \"react-hot-toast\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport {\n  useAuthState,\n  useSendPasswordResetEmail,\n  useSignInWithEmailAndPassword,\n} from \"react-firebase-hooks/auth\";\nimport auth from \"../../firebase.init\";\nimport axios from \"axios\";\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\n\nconst Login = () => {\n  const [signInWithEmailAndPassword, user, loading, error] =\n    useSignInWithEmailAndPassword(auth);\n  const [sendPasswordResetEmail, sending] = useSendPasswordResetEmail(auth);\n  const [user1, loading1] = useAuthState(auth);\n  const emailRef = useRef<HTMLInputElement>(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = location.state?.from?.pathname || \"/\";\n\n  useEffect(() => {\n    if (user || user1) {\n      toast.success(\"Login Successful\");\n      const email = user?.user?.email || user1?.email;\n      axios\n        .post(\"https://stock-world-server.onrender.com/login\", { email })\n        .then((response) => {\n          const { data } = response;\n          localStorage.setItem(\"accessToken\", data.token);\n          localStorage.setItem(\"email\", email as string);\n          navigate(from, { replace: true });\n        })\n        .catch((error) => {\n          toast.error(error.message);\n        });\n    }\n    if (error) {\n      toast.error(error.message);\n    }\n  }, [error, from, navigate, user, user1]);\n\n  const handleLogin = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const email = event.currentTarget.email.value;\n    const password = event.currentTarget.password.value;\n    signInWithEmailAndPassword(email, password);\n  };\n\n  const resetPassword = async () => {\n    const email = emailRef.current?.value;\n    if (email) {\n      await sendPasswordResetEmail(email);\n      toast.success(\"Sent password reset email\");\n    } else {\n      toast.error(\"Please enter your email address\");\n    }\n  };\n\n  if (loading || loading1 || sending) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <section className=\"min-h-screen bg-base-200 flex items-center justify-center p-4\">\n      <div className=\"card lg:card-side bg-base-100 shadow-xl max-w-4xl w-full\">\n        <figure className=\"lg:w-1/2 hidden lg:flex\">\n          <img\n            className=\"object-cover w-full h-full\"\n            src={login1}\n            alt=\"Login illustration\"\n          />\n        </figure>\n        <div className=\"card-body lg:w-1/2 justify-center\">\n          <div className=\"text-center mb-6\">\n            <h2 className=\"text-3xl font-bold\">Welcome Back!</h2>\n            <p className=\"opacity-70\">Please sign in to your account</p>\n          </div>\n\n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            <input\n              name=\"email\"\n              type=\"email\"\n              ref={emailRef}\n              placeholder=\"Email\"\n              required\n              className=\"input input-bordered w-full\"\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n              required\n              className=\"input input-bordered w-full\"\n            />\n            <button type=\"submit\" className=\"btn btn-primary w-full\">\n              Sign In\n            </button>\n          </form>\n\n          <div className=\"text-center mt-4 space-y-2 text-sm\">\n            <p>\n              Don't have an account?{\" \"}\n              <Link className=\"link link-primary\" to=\"/register\">\n                Create Account\n              </Link>\n            </p>\n            <p>\n              Forgot your password?{\" \"}\n              <button className=\"link link-primary\" onClick={resetPassword}>\n                Reset Password\n              </button>\n            </p>\n          </div>\n\n          <div className=\"divider\">OR</div>\n          <SocialLogin />\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Login;"],"names":["login1","Login","signInWithEmailAndPassword","user","loading","error","useSignInWithEmailAndPassword","auth","sendPasswordResetEmail","sending","useSendPasswordResetEmail","user1","loading1","useAuthState","emailRef","useRef","navigate","useNavigate","from","_b","_a","useLocation","useEffect","toast","email","axios","response","data","handleLogin","event","password","resetPassword","LoadingSpinner","jsxs","jsx","Link","SocialLogin"],"mappings":"sOAAA,MAAAA,EAAe,8BCcTC,EAAQ,IAAM,SAClB,KAAM,CAACC,EAA4BC,EAAMC,EAASC,CAAK,EACrDC,EAA8BC,CAAI,EAC9B,CAACC,EAAwBC,CAAO,EAAIC,EAA0BH,CAAI,EAClE,CAACI,EAAOC,CAAQ,EAAIC,EAAaN,CAAI,EACrCO,EAAWC,EAAAA,OAAyB,IAAI,EACxCC,EAAWC,EAAA,EAEXC,IAAOC,GAAAC,EADIC,EAAA,EACK,QAAT,YAAAD,EAAgB,OAAhB,YAAAD,EAAsB,WAAY,IAE/CG,EAAAA,UAAU,IAAM,OACd,GAAInB,GAAQQ,EAAO,CACjBY,EAAM,QAAQ,kBAAkB,EAChC,MAAMC,IAAQJ,EAAAjB,GAAA,YAAAA,EAAM,OAAN,YAAAiB,EAAY,SAAST,GAAA,YAAAA,EAAO,OAC1Cc,EACG,KAAK,gDAAiD,CAAE,MAAAD,CAAA,CAAO,EAC/D,KAAME,GAAa,CAClB,KAAM,CAAE,KAAAC,GAASD,EACjB,aAAa,QAAQ,cAAeC,EAAK,KAAK,EAC9C,aAAa,QAAQ,QAASH,CAAe,EAC7CR,EAASE,EAAM,CAAE,QAAS,EAAA,CAAM,CAClC,CAAC,EACA,MAAOb,GAAU,CAChBkB,EAAM,MAAMlB,EAAM,OAAO,CAC3B,CAAC,CACL,CACIA,GACFkB,EAAM,MAAMlB,EAAM,OAAO,CAE7B,EAAG,CAACA,EAAOa,EAAMF,EAAUb,EAAMQ,CAAK,CAAC,EAEvC,MAAMiB,EAAeC,GAA4C,CAC/DA,EAAM,eAAA,EACN,MAAML,EAAQK,EAAM,cAAc,MAAM,MAClCC,EAAWD,EAAM,cAAc,SAAS,MAC9C3B,EAA2BsB,EAAOM,CAAQ,CAC5C,EAEMC,EAAgB,SAAY,OAChC,MAAMP,GAAQJ,EAAAN,EAAS,UAAT,YAAAM,EAAkB,MAC5BI,GACF,MAAMhB,EAAuBgB,CAAK,EAClCD,EAAM,QAAQ,2BAA2B,GAEzCA,EAAM,MAAM,iCAAiC,CAEjD,EAEA,OAAInB,GAAWQ,GAAYH,QACjBuB,EAAA,EAAe,QAItB,UAAA,CAAQ,UAAU,gEACjB,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,UAAU,0BAChB,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,6BACV,IAAKlC,EACL,IAAI,oBAAA,CAAA,EAER,EACAiC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,gBAAa,EAChDA,EAAAA,IAAC,IAAA,CAAE,UAAU,aAAa,SAAA,gCAAA,CAA8B,CAAA,EAC1D,EAEAD,EAAAA,KAAC,OAAA,CAAK,SAAUL,EAAa,UAAU,YACrC,SAAA,CAAAM,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,KAAK,QACL,IAAKpB,EACL,YAAY,QACZ,SAAQ,GACR,UAAU,6BAAA,CAAA,EAEZoB,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,KAAK,WACL,YAAY,WACZ,SAAQ,GACR,UAAU,6BAAA,CAAA,QAEX,SAAA,CAAO,KAAK,SAAS,UAAU,yBAAyB,SAAA,SAAA,CAEzD,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAA,OAAC,IAAA,CAAE,SAAA,CAAA,yBACsB,UACtBE,EAAA,CAAK,UAAU,oBAAoB,GAAG,YAAY,SAAA,gBAAA,CAEnD,CAAA,EACF,SACC,IAAA,CAAE,SAAA,CAAA,wBACqB,UACrB,SAAA,CAAO,UAAU,oBAAoB,QAASJ,EAAe,SAAA,gBAAA,CAE9D,CAAA,CAAA,CACF,CAAA,EACF,EAEAG,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,SAAA,KAAE,QAC1BE,EAAA,CAAA,CAAY,CAAA,CAAA,CACf,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}